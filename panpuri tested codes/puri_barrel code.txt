#include <AccelStepper.h>
const int puri_pul=4;       //puri drop pul+ is d4
const int puri_dir=5;       //puri drop dir+ is d5
const int sensorPin = 7;    // Sensor pin connected to Arduino digital pin 7
const int ir=8;             //ir sensor

AccelStepper puriStepper(AccelStepper::DRIVER, puri_pul, puri_dir);
void setup() {
  pinMode(sensorPin, INPUT_PULLUP);  // Set sensor pin as input with pull-up resistor
  pinMode(ir,INPUT_PULLUP);
  puriStepper.setMaxSpeed(2000);
  puriStepper.setAcceleration(5000);
}
void loop() {
  if (digitalRead(sensorPin) == HIGH) {
    while (digitalRead(ir) == HIGH) {
      puriStepper.move(2200);            // Move 2200 steps forward
      puriStepper.runToPosition();       // Run to the new position
      delay(200);  // Add a small delay to prevent rapid cycling
    }
  }

  // Ensuring the puri dropper can operate again by resetting its position 
  if (digitalRead(sensorPin) == LOW || digitalRead(ir) == LOW) {
    puriStepper.setCurrentPosition(0);  // Reset position for puriStepper
  }
}